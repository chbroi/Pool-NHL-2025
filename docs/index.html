<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pool des S√©ries NHL</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f4f4f4; }
    h1 { text-align: center; }
    .section { background: white; padding: 20px; margin-bottom: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .matchup { margin-bottom: 10px; }
    select { margin-left: 10px; }
    label { font-weight: bold; }
    .results { margin-top: 20px; }
    button { padding: 10px 20px; font-size: 16px; margin-top: 20px; cursor: pointer; }
    .rules-container {
            display: none;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .engagement-container {
            display: none;
            margin-top: 20px;
            text-align: center;
        }
        #predictionForm {
            display: none;
            margin-top: 20px;
        }
        .button {
            padding: 10px 20px;
            margin: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
  </style>
</head>
<body>
   <!-- Section des R√®glements -->
    <div class="rules-container" id="rulesContainer">
        <h2>R√®glements du pool LNH</h2>
        <h4>1. Bref rappel sur les s√©ries dans la LNH</h4>
          <h5>Les s√©ries √©liminatoires sont compos√©s de 4 rondes: 1ere ronde, 2e ronde, Finales de conf√©rences, Finale de la Coupe Stanley </p>
          <h5>Le gagnant d'un affrontement entre 2 √©quipes de la LNH est d√©termin√© par la premi√®re √©quipe remportant 4 matchs sur une possibilit√©s de 7.</p>
          <h5>La LNH est divis√© entre 2 conf√©rence (Est et Ouest) et chacune des conf√©rences est divis√©e de la mani√®re suivante:</h5>
            <h6>Conf√©rence Est: Division Metropolitaine (MET) et Atlantique (ATL)</h6>
            <h6>Conf√©rence Ouest: Division Pacifique (PAC) et Centrale (CEN) </h6>
          <h5>Le troph√©e Conn Smythe est remis au joueur par excellence des s√©ries √©liminatoires dans la LNH. </h5>
        <h4>2. D√©finitions et r√®gles du pool</h4>
          <h5>Une personne est consid√©r√©e comme un participant du pool s'il contribue au montant de 5$ √† envoyer √† Charles Brosseau (via virement interac √† charles.brosseau@hotmail.com) et entre sa pr√©diction de 1ere ronde avant le d√©but des series √©liminatoires (19 avril 2025 19h).</h5>
          <h5>Le choix du participant est compos√© de l'√©quipe gagnante de chaque affrontement (1 √©quipe parmi 2), le nombre de matchs pour y arriver (de 4 √† 7 matchs)</h5>
          <h5>La pr√©diction du participant est compos√©e de chaque choix de √©tabli en 2.2, et du gagnant du Conn Smythe pour chacune des rondes (active et subs√©quentes)</h5>
          <h5>"Pour r√©sumer les deux derniers points, le participant doit entrer sa pr√©diction avant chacune des 4 rondes. Voici donc les 4 pr√©dictions √† faire:</h5>
            <h6>Les choix des rondes 1 et 2, des finales de conf√©rences, de la Coupe Stanley et du Conn Smythe</h6>
            <h6>Les choix de la ronde 2, des finales de conf√©rences, de la Coupe Stanley et du Conn Smythe</h6>
            <h6>Les choix des finales de conf√©rences, de la Coupe Stanley et du Conn Smythe</h6>
            <h6>Les choix de la Coupe Stanley et du Conn Smythe"</h6>
          <h5>Chacune des pr√©dictions est consid√©r√©e valide si elle est entr√©e avant le d√©but du premier match de chacune des rondes par le participant:</h5>
            <h6>1ere pr√©diction:  avant le 19 avril 2025 19h</h6>
            <h6>2e pr√©diction: TBD</h6>
            <h6>3e pr√©diction: TBD</h6>
            <h6>4e pr√©diction : TBD.</h6>
          <h5>Si un participant n'effectue pas une pr√©diction valide, ses choix pr√©c√©dents seront reconduits √† la prochaine ronde. S'il s'agit de la premi√®re ronde, le participant est de facto √©limin√©.</h5>
        <h4>3. Syst√®me de pointage</h4>
          <h5>Le syst√®me de pointage est illustr√© dans le tableau sous l'onglet syst√®me de pointage.</h5> 
          <h5>Pour que le participants obtiennent les points associ√©s aux nombres de matchs, son choix doit aussi contenir l'√©quipe gagnante.</h5> 
          <h5>Les gagnants du pool sont ceux qui ont les 3 r√©coltes de points les plus √©lev√©s sur la dur√©e des s√©ries √©liminatoires.</h5>
          <h5>"Le montant attribu√© aux 3 gagnants est calcul√© de la mani√®re suivante:
            <h6>1ere place: Nombre de participants*5$*4/7</h6>
            <h6>2e place: Nombre de participants*5$*2/7</h6>
            <h6>3e place: Nombre de participants*5$*1/7</h6>
        <button class="button" id="acceptRulesButton">J'ai lu et j'accepte les r√®gles</button>
    </div>
    <!-- Section de l'engagement -->
    <div class="engagement-container" id="engagementContainer">
        <p>Je m'engage √† envoyer un montant de 5$ pour participer √† ce pool √† l'adresse <strong>charles.brosseau@hotmail.com</strong>.</p>
        <p>Charles s'engage √† vous envoyer le montant pour ceux finissant sur le podium tel que mentionn√© dans les r√®glements.</p>
        <button class="button" id="confirmEngagementButton" onclick="confirmEngagement()">Je m'engage</button>
    </div>
  <form id="predictionForm">
    <h1>üèí Pool des s√©ries √©liminatoires de la LNH 2025</h1>
    <!-- Champ pour le nom -->
    <label for="Nom">Nom :</label>
    <input type="text" id="Nom" name="Nom" required>
    <label for="Prenom">Pr√©nom :</label>
    <input type="text" id="Prenom" name="Prenom" required>
    <!-- Ronde 1 -->
    <div class="section" id="round1">
      <h2>Ronde 1 - Association Est</h2>
      <div class="matchup">
        <label>TOR vs OTT</label>
        <select name="R1_EST_1_team" id="R1_EST_1_team">
          <option value="">Choisir</option>
          <option value="TOR">TOR</option>
          <option value="OTT">OTT</option>
        </select>
        <label>en</label>
        <select name="R1_EST_1_games" id="R1_EST_1_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
      <div class="matchup">
        <label>TBL vs FLA</label>
        <select name="R1_EST_2_team" id="R1_EST_2_team">
          <option value="">Choisir</option>
          <option value="TBL">TBL</option>
          <option value="FLA">FLA</option>
        </select>
        <label>en</label>
        <select name="R1_EST_2_games" id="R1_EST_2_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
      <div class="matchup">
        <label>WSH vs MTL</label>
        <select name="R1_EST_3_team" id="R1_EST_3_team">
          <option value="">Choisir</option>
          <option value="WSH">WSH</option>
          <option value="MTL">MTL</option>
        </select>
        <label>en</label>
        <select name="R1_EST_3_games" id="R1_EST_3_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
      <div class="matchup">
        <label>CAR vs NJD</label>
        <select name="R1_EST_4_team" id="R1_EST_4_team">
          <option value="">Choisir</option>
          <option value="CAR">CAR</option>
          <option value="NJD">NJD</option>
        </select>
        <label>en</label>
        <select name="R1_EST_4_games" id="R1_EST_4_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
      <h2>Ronde 1 - Association Ouest</h2>
      <div class="matchup">
        <label>WPG vs STL</label>
        <select name="R1_WEST_1_team" id="R1_WEST_1_team">
          <option value="">Choisir</option>
          <option value="WPG">WPG</option>
          <option value="STL">STL</option>
        </select>
        <label>en</label>
        <select name="R1_WEST_1_games" id="R1_WEST_1_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
      <div class="matchup">
        <label>DAL vs COL</label>
        <select name="R1_WEST_2_team" id="R1_WEST_2_team">
          <option value="">Choisir</option>
          <option value="DAL">DAL</option>
          <option value="COL">COL</option>
        </select>
        <label>en</label>
        <select name="R1_WEST_2_games" id="R1_WEST_2_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
      <div class="matchup">
        <label>VGK vs MIN</label>
        <select name="R1_WEST_3_team" id="R1_WEST_3_team">
          <option value="">Choisir</option>
          <option value="VGK">VGK</option>
          <option value="MIN">MIN</option>
        </select>
        <label>en</label>
        <select name="R1_WEST_3_games" id="R1_WEST_3_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
      <div class="matchup">
        <label>LAK vs EDM</label>
        <select name="R1_WEST_4_team" id="R1_WEST_4_team">
          <option value="">Choisir</option>
          <option value="LAK">LAK</option>
          <option value="EDM">EDM</option>
        </select>
        <label>en</label>
        <select name="R1_WEST_4_games" id="R1_WEST_4_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
    </div>

    <!-- Ronde 2 -->
    <div class="section" id="round2" style="display: none;">
      <h2>Ronde 2 - Association Est</h2>
      <div class="matchup">
        <label id="R2_EST_1_label">Match 1</label>
        <select name="R2_EST_1_team" id="R2_EST_1_team"></select>
        <label>en</label>
        <select name="R2_EST_1_games" id="R2_EST_1_games"> 
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
      <div class="matchup">
        <label id="R2_EST_2_label">Match 2</label>
        <select name="R2_EST_2_team" id="R2_EST_2_team"></select>
        <label>en</label>
        <select name="R2_EST_2_games" id="R2_EST_2_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>

      <h2>Ronde 2 - Association Ouest</h2>
      <div class="matchup">
        <label id="R2_WEST_1_label">Match 3</label>
        <select name="R2_WEST_1_team" id="R2_WEST_1_team"></select>
        <label>en</label>
        <select name="R2_WEST_1_games" id="R2_WEST_1_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
      <div class="matchup">
        <label id="R2_WEST_2_label">Match 4</label>
        <select name="R2_WEST_2_team" id="R2_WEST_2_team"></select>
        <label>en</label>
        <select name="R2_WEST_2_games" id="R2_WEST_2_games">
          <option value="">Choisir</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option>
        </select> matchs
      </div>
    </div>

    <!-- Ronde 3 -->
    <div class="section" id="round3" style="display:none;">
      <h2>Ronde 3 - Finales d'association</h2>
      <div class="matchup">
        <label id="R3_EST_1_label">√âquipe Est 1 vs √âquipe Est 2</label>
        <select id="R3_EST_1_team" name="R3_EST_1_team">
          <option value="">Choisir</option>
        </select>
        <label>en</label>
        <select name="R3_EST_1_games" id="R3_EST_1_games">>
          <option value="">Choisir</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
        </select> matchs
      </div>
      <div class="matchup">
        <label id="R3_WEST_1_label">√âquipe Ouest 1 vs √âquipe Ouest 2</label>
        <select id="R3_WEST_1_team" name="R3_WEST_1_team">
          <option value="">Choisir</option>
        </select>
        <label>en</label>
        <select name="R3_WEST_1_games" id="R3_WEST_1_games">
          <option value="">Choisir</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
        </select> matchs
      </div>
    </div>

    <!-- Ronde 4 -->
    <div class="section" id="round4" style="display:none;">
      <h2>Ronde 4 - Finale de la Coupe Stanley</h2>
      <div class="matchup">
        <label id="R4_final_label">Champion Est vs Champion Ouest</label>
        <select id="R4_final_team" name="R4_final_team">
          <option value="">Choisir</option>
        </select>
        <label>en</label>
        <select name="R4_final_games" id="R4_final_games">
          <option value="">Choisir</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
        </select> matchs
      </div>
    </div>
    <!-- Liste dynamique des joueurs pour le Conn Smythe -->
    <label for="Conn_Smythe">Gagnant du Conn Smythe :</label>
    <select name="Conn_Smythe" id="Conn_Smythe" disabled required>
      <option value="">-- Choisissez un joueur --</option>
    </select>
    
    <div class="section">
      <button id="submitBtn" type="button" onclick="submitPredictions()" disabled>Soumettre les pr√©dictions</button>
    </div>
  </form>
<script>
// Affiche les r√®glements au chargement
    window.addEventListener('DOMContentLoaded', () => {
      document.getElementById('rulesContainer').style.display = 'block';
    });

    // Lorsqu'on accepte les r√®gles
    document.getElementById('acceptRulesButton').addEventListener('click', () => {
      document.getElementById('rulesContainer').style.display = 'none';
      document.getElementById('engagementContainer').style.display = 'block';
    });

    // Lorsqu'on confirme l'engagement
    function confirmEngagement() {
      alert("Merci de vous √™tre engag√©. Vous pouvez maintenant soumettre vos pr√©dictions.");
      document.getElementById('engagementContainer').style.display = 'none';
      document.getElementById('predictionForm').style.display = 'block';
    }
  
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("#predictionForm select, #predictionForm input").forEach(el => {
    el.addEventListener("change", checkIfReadyToSubmit);
  });
});
  function getAllSelectValues() {
    const selects = document.querySelectorAll('select');
    const data = [];
    selects.forEach(select => {
      const label = select.previousElementSibling ? select.previousElementSibling.textContent : select.name;
      data.push({
        Matchup: label.trim(),
        Choix: select.value || "Non choisi"
      });
    });
    return data;
  }
    const allPredictions = [];

    // Liste des joueurs par √©quipe
    const playersByTeam = {
        "CAR": ["Pyotr Kochetkov","Frederik Andersen","Sebastian Aho", "Seth Jarvis", , "Andrei Svechnikov", "Shayne Gostisbehere", "Jack Roslovic", "Jordan Staal", "Jordan Martinook", "Jackson Blake", "Jesperi Kotkaniemi", "Eric Robinson", "Brent Burns", "Dmitry Orlov", "Jaccob Slavin", "Taylor Hall", "Jalen Chatfield", "Sean Walker", "William Carrier", "Logan Stankoven", "Tyson Jost", "Jack Drury", "Mark Jankowski", "Mikko Rantanen", "Scott Morrow", "Juha Jaaska", "Justin Robidas", "Ty Smith", "Skyler Brind'Amour", "Bradly Nadeau", "Domenick Fensore", "Ryan Suzuki", "Riley Stillman"
],
        "COL": ["Mackenzie Blackwood","Scott Wedgewood","Nathan MacKinnon", "Cale Makar", "Artturi Lehkonen", "Devon Toews", "Jonathan Drouin", "Valeri Nichushkin", "Casey Mittelstadt", "Ross Colton", "Martin Necas", "Samuel Girard", "Joel Kiviranta", "Logan O'Connor", "Parker Kelly", "Josh Manson", "Sam Malinski", "Charlie Coyle", "Brock Nelson", "Jack Drury", "Nikolai Kovalenko", "Miles Wood", "Ivan Ivan", "Calvin de Haan", "Juuso Parssinen", "Oliver Kylington", "Ryan Lindgren", "John Ludvig", "Jimmy Vesey", "Erik Johnson", "Keaton Middleton", "Wyatt Aamodt", "Calum Ritchie", "T.J. Tynan", "Chris Wagner", "Jack Ahcan", "Chase Bradley", "Oskar Olausson", "Jason Polin", "Tye Felhaber", "Givani Smith", "Matt Stienburg", "Nikita Prishchepov", "Jere Innala"
],
        "DAL": ["Jake Oettinger","Casey DeSmith","Matt Duchene", "Jason Robertson", "Wyatt Johnston", "Roope Hintz", "Thomas Harley", "Jamie Benn", "Mason Marchment", "Evgenii Dadonov", "Esa Lindell", "Miro Heiskanen", "Mavrik Bourque", "Sam Steel", "Tyler Seguin", "Mikael Granlund", "Mikko Rantanen", "Colin Blackwell", "Oskar B√§ck", "Ilya Lyubushkin", "Mathew Dumba", "Cody Ceci", "Lian Bichsel", "Brendan Smith", "Nils Lundkvist", "Justin Hryckowian", "Arttu Hyry", "Matƒõj  Bl√ºmel", "Kyle Capobianco", "Alexander Petrovic"
],
        "EDM": ["Stuart Skinner","Calvin Pickard","Leon Draisaitl", "Connor McDavid", "Evan Bouchard", "Ryan Nugent-Hopkins", "Zach Hyman", "Mattias Ekholm", "Darnell Nurse", "Corey Perry", "Connor Brown", "Jeff Skinner", "Viktor Arvidsson", "Adam Henrique", "Brett Kulak", "Vasily Podkolzin", "Mattias Janmark", "Kasperi Kapanen", "Ty Emberson", "Jake Walman", "Troy Stecher", "Derek Ryan", "John Klingberg", "Noah Philp", "Max Jones", "Matt Savoie", "Drake Caggiula", "Joshua Brown", "Trent Frederic", "Quinn Hutson", "Cam Dineen", "Travis Dermott"
],
        "FLA": ["Sergei Bobrovsky","Vitek Vanecek","Sam Reinhart", "Aleksander Barkov", "Matthew Tkachuk", "Carter Verhaeghe", "Sam Bennett", "Anton Lundell", "Aaron Ekblad", "Evan Rodrigues", "Mackie Samoskevich", "Gustav Forsling", "Eetu Luostarinen", "Jesper Boqvist", "Niko Mikkola", "Nate Schmidt", "Uvis Balinskis", "A.J. Greer", "Dmitry Kulikov", "Seth Jones", "Tomas Nosek", "Adam Boqvist", "Brad Marchand", "Jonah Gadjovich", "Justin Sourdif", "Matt Kiersted", "Jesse Puljujarvi", "Nico Sturm", "Rasmus Asplund", "Jaycob Megna", "Patrick Giles", "Tobias Bjornfot"
],
        "LAK": ["Darcy Kuemper","David Rittich","Adrian Kempe", "Anze Kopitar", "Kevin Fiala", "Quinton Byfield", "Warren Foegele", "Phillip Danault", "Alex Laferriere", "Trevor Moore", "Brandt Clarke", "Vladislav Gavrikov", "Jordan Spence", "Alex Turcotte", "Mikey Anderson", "Joel Edmundson", "Andrei Kuzmenko", "Drew Doughty", "Tanner Jeannot", "Trevor Lewis", "Jacob Moverare", "Samuel Helenius", "Andre Lee", "Akil Thomas", "Kyle Burroughs", "Taylor Ward", "Andreas Englund", "Jeff Malott", "Caleb Jones"
],
        "MIN": ["Filip Gustavsson","Marc-Andre Fleury","Marco Rossi", "Kirill Kaprizov", "Mats Zuccarello", "Frederick Gaudreau", "Marcus Johansson", "Jared Spurgeon", "Joel Eriksson Ek", "Marcus Foligno", "Brock Faber", "Ryan Hartman", "Jake Middleton", "Jonas Brodin", "Zach Bogosian", "Yakov Trenin", "Declan Chisholm", "Vincent Hinostroza", "Gustav Nyquist", "Marat Khusnutdinov", "Jakub Lauko", "Jon Merrill", "Liam Ohgren", "Devin Shore", "David Jiricek", "Justin Brazeau", "Brendan Gaunce", "Cameron Crotty", "Daemon Hunt", "Michael Milne", "Travis Boyd", "Reese Johnson", "Travis Dermott", "Ben Jones"
],
        "MTL": ["Sam Montembeault","Jakub Dobes","Nick Suzuki", "Cole Caufield", "Lane Hutson", "Juraj Slafkovsk√Ω", "Brendan Gallagher", "Jake Evans", "Patrik Laine", "Christian Dvorak", "Mike Matheson", "Joel Armia", "Josh Anderson", "Alex Newhook", "Kirby Dach", "Alexandre Carrier", "Kaiden Guhle", "Emil Heineman", "David Savard", "Jayden Struble", "Arber Xhekaj", "Logan Mailloux", "Ivan Demidov", "Joshua Roy", "Oliver Kapanen", "Lucas Condotta", "Owen Beck", "Justin Barron", "Rafael Harvey-Pinard", "Alex Barr√©-Boulet", "Michael Pezzetta"
],
        "NJD": ["Jacob Markstrom","Jake Allen","Jesper Bratt", "Jack Hughes", "Nico Hischier", "Timo Meier", "Luke Hughes", "Stefan Noesen", "Dougie Hamilton", "Dawson Mercer", "Ondrej Palat", "Paul Cotter", "Erik Haula", "Brett Pesce", "Tomas Tatar", "Johnathan Kovacevic", "Brenden Dillon", "Nathan Bastian", "Jonas Siegenthaler", "Seamus Casey", "Cody Glass", "Justin Dowling", "Brian Dumoulin", "Curtis Lazar", "Simon Nemec", "Daniel Sprong", "Mike Hardman", "Marc McLaughlin", "Nolan Foote", "Daniil Misyul", "Brian Halonen", "Nathan L√©gar√©", "Shane Bowers", "Dennis Cholowski", "Kurtis MacDermid"
],
        "OTT": ["Linus Ullmark","Anton Forsberg","Tim St√ºtzle", "Drake Batherson", "Jake Sanderson", "Brady Tkachuk", "Claude Giroux", "Thomas Chabot", "Shane Pinto", "Ridly Greig", "Joshua Norris", "Michael Amadio", "Adam Gaudette", "Nick Jensen", "Dylan Cozens", "David Perron", "Nick Cousins", "Artem Zub", "Tyler Kleven", "Travis Hamonic", "Noah Gregor", "Matthew Highmore", "Fabian Zetterlund", "Jacob Bernard-Docker", "Nikolas Matinpalo", "Zack Ostapchuk", "Zack MacEwen", "Cole Reinhardt", "Dennis Gilbert", "Angus Crookshank", "Hayden Hodgson", "Jan Jenik", "Donovan Sebrango"
],
        "STL": ["Jordan Binnington","Joel Hofer","Robert Thomas", "Jordan Kyrou", "Dylan Holloway", "Pavel Buchnevich", "Brayden Schenn", "Jake Neighbours", "Cam Fowler", "Colton Parayko", "Zack Bolduc", "Justin Faulk", "Philip Broberg", "Oskar Sundqvist", "Alexey Toropchenko", "Brandon Saad", "Nathan Walker", "Radek Faksa", "Ryan Suter", "Mathieu Joseph", "Alexandre Texier", "Tyler Tucker", "Scott Perunovich", "Nick Leddy", "Jimmy Snuggerud", "Matthew Kessel", "P.O Joseph", "Kasperi Kapanen", "Dalibor Dvorsky", "Corey Schueneman"
],
        "TBL": ["Andrei Vasilevskiy","Jonas Johansson","Nikita Kucherov", "Brandon Hagel", "Brayden Point", "Jake Guentzel", "Victor Hedman", "Anthony Cirelli", "Nick Paul", "Darren Raddysh", "Ryan McDonagh", "Erik Cernak", "Gage Goncalves", "Nick Perbix", "Emil Lilleberg", "Mitchell Chaffee", "Yanni Gourde", "Conor Geekie", "J.J. Moser", "Mikey Eyssimont", "Oliver Bjorkstrand", "Cam Atkinson", "Luke Glendening", "Zemgus Girgensons", "Dylan Duke", "Declan Carlile", "Steven Santini", "Jack Finley", "Conor Sheary", "Maxwell Crozier"
],
        "TOR": ["Anthony Stolarz","Joseph Woll","Mitch Marner", "William Nylander", "Auston Matthews", "John Tavares", "Matthew Knies", "Morgan Rielly", "Bobby McMann", "Max Domi", "Oliver Ekman-Larsson", "Jake McCabe", "Nicholas Robertson", "Pontus Holmberg", "Steven Lorentz", "Chris Tanev", "Max Pacioretty", "David Kampf", "Simon Benoit", "Conor Timmins", "Calle Jarnkrok", "Philippe Myers", "Fraser Minten", "Scott Laughton", "Brandon Carlo", "Connor Dewar", "Alex Steeves", "Ryan Reaves", "Dakota Mermis", "Timothy Liljegren", "Jacob Quillan", "Jani Hakanp√§√§", "Alexander Nylander", "Nikita Grebenkin"
],
        "VGK": ["Ilya Samsonov","Adin Hill","Jack Eichel", "Mark Stone", "Tomas Hertl", "Shea Theodore", "Pavel Dorofeyev", "Ivan Barbashev", "Brett Howden", "Noah Hanifin", "Alex Pietrangelo", "Nicolas Roy", "Keegan Kolesar", "William Karlsson", "Victor Olofsson", "Tanner Pearson", "Brayden McNabb", "Brandon Saad", "Zach Whitecloud", "Alexander Holtz", "Nicolas Hague", "Reilly Smith", "Kaedan Korczak", "Cole Schwindt", "Ben Hutton", "Callahan Burke", "Tanner Laczynski", "Grigori Denisenko", "Mason Morelli", "Robert Hagg", "Raphael Lavoie", "Brendan Brisson", "Jonas Rondbjerg"
],
        "WSH": ["Charlie Lindgren","Logan Thompson","Dylan Strome", "Alex Ovechkin", "Aliaksei Protas", "Pierre-Luc Dubois", "Tom Wilson", "Connor McMichael", "John Carlson", "Jakob Chychrun", "Rasmus Sandin", "Andrew Mangiapane", "Taylor Raddysh", "Nic Dowd", "Martin Feh√©rv√°ry", "Matt Roy", "Trevor van Riemsdyk", "Brandon Duhaime", "Lars Eller", "Jakub Vrana", "Hendrix Lapierre", "Ethen Frank", "Anthony Beauvillier", "Ivan Miroshnichenko", "Michael Sgarbossa", "Dylan McIlrath", "Ryan Leonard", "Sonny Milano", "Alex Alexeyev"
],
        "WPG": ["Connor Hellebuyck","Eric Comrie","Kyle Connor", "Mark Scheifele", "Nikolaj Ehlers", "Josh Morrissey", "Gabriel Vilardi", "Cole Perfetti", "Neal Pionk", "Vladislav Namestnikov", "Nino Niederreiter", "Adam Lowry", "Alex Iafallo", "Mason Appleton", "Dylan Samberg", "Dylan DeMelo", "Colin Miller", "Morgan Barron", "Logan Stanley", "Rasmus Kupari", "Haydn Fleury", "David Gustafsson", "Brandon Tanev", "Nikita Chibrikov", "Luke Schenn", "Parker Ford", "Brad Lambert", "Jaret Anderson-Dolan", "Ville Heinola", "Dominic Toninato", "Dylan Coghlan"
],
    };

    // Met √† jour dynamiquement la liste des joueurs disponibles pour le Conn Smythe
    function updateConnSmytheList(team1, team2) {
      const list = [...(playersByTeam[team1] || []), ...(playersByTeam[team2] || [])];
      const connSmytheSelect = document.getElementById('Conn_Smythe');
    
      // R√©initialise les options
      connSmytheSelect.innerHTML = "";
      
      // Option par d√©faut
      const defaultOption = document.createElement("option");
      defaultOption.textContent = "-- Choisissez un joueur --";
      defaultOption.value = "";
      connSmytheSelect.appendChild(defaultOption);
    
      // Remplit avec les joueurs autoris√©s
      list.forEach(player => {
        const option = document.createElement("option");
        option.value = player;
        option.textContent = player;
        connSmytheSelect.appendChild(option);
      });

  // Active le champ
  connSmytheSelect.disabled = list.length === 0;
}

    // Sur changement d'une des deux √©quipes finalistes
    function updateConnSmytheField() {
        const team1 = document.getElementById('R3_EST_1_team').value;
        const team2 = document.getElementById('R3_WEST_1_team').value;
        if (team1 && team2) {
            updateConnSmytheList(team1, team2);
        }
    }

    document.getElementById('R3_EST_1_team').addEventListener('change', updateConnSmytheField);
    document.getElementById('R3_WEST_1_team').addEventListener('change', updateConnSmytheField);

    const round1Ids = [
      'R1_EST_1_team', 'R1_EST_2_team', 'R1_EST_3_team', 'R1_EST_4_team',
      'R1_WEST_1_team', 'R1_WEST_2_team', 'R1_WEST_3_team', 'R1_WEST_4_team'
    ];

    function createRound2Matchups() {
      const r2Matchups = [
        ['R1_EST_1_team', 'R1_EST_2_team', 'R2_EST_1_team', 'R2_EST_1_label'],
        ['R1_EST_3_team', 'R1_EST_4_team', 'R2_EST_2_team', 'R2_EST_2_label'],
        ['R1_WEST_1_team', 'R1_WEST_2_team', 'R2_WEST_1_team', 'R2_WEST_1_label'],
        ['R1_WEST_3_team', 'R1_WEST_4_team', 'R2_WEST_2_team', 'R2_WEST_2_label']
      ];

      let allFilled = true;
      round1Ids.forEach(id => {
        const value = document.getElementById(id).value;
        if (!value) allFilled = false;
      });

      if (!allFilled) return;

      r2Matchups.forEach(([id1, id2, selectId, labelId]) => {
        const team1 = document.getElementById(id1).value;
        const team2 = document.getElementById(id2).value;
        const select = document.getElementById(selectId);
        const label = document.getElementById(labelId);

        label.textContent = `${team1} vs ${team2}`;
        select.innerHTML = `<option value="">Choisir</option>
                            <option value="${team1}">${team1}</option>
                            <option value="${team2}">${team2}</option>`;
      });

      document.getElementById('round2').style.display = 'block';
    }

    function createRound3Matchups() {
      const r3Matchups = [
        ['R2_EST_1_team', 'R2_EST_2_team', 'R3_EST_1_team', 'R3_EST_1_label'],
        ['R2_WEST_1_team', 'R2_WEST_2_team', 'R3_WEST_1_team', 'R3_WEST_1_label']
      ];

      let allFilled = true;
      for (const [id1, id2] of r3Matchups) {
        if (!document.getElementById(id1).value || !document.getElementById(id2).value) {
          allFilled = false;
        }
      }

      if (!allFilled) return;

      r3Matchups.forEach(([id1, id2, selectId, labelId]) => {
        const team1 = document.getElementById(id1).value;
        const team2 = document.getElementById(id2).value;
        const select = document.getElementById(selectId);
        const label = document.getElementById(labelId);

        label.textContent = `${team1} vs ${team2}`;
        select.innerHTML = `<option value="">Choisir</option>
                            <option value="${team1}">${team1}</option>
                            <option value="${team2}">${team2}</option>`;
      });

      document.getElementById('round3').style.display = 'block';
    }

    function createRound4Matchup() {
      const team1 = document.getElementById('R3_EST_1_team').value;
      const team2 = document.getElementById('R3_WEST_1_team').value;

      if (!team1 || !team2) return;

      const select = document.getElementById('R4_final_team');
      const label = document.getElementById('R4_final_label');

      label.textContent = `${team1} vs ${team2}`;
      select.innerHTML = `<option value="">Choisir</option>
                          <option value="${team1}">${team1}</option>
                          <option value="${team2}">${team2}</option>`;

      document.getElementById('round4').style.display = 'block';
      updateConnSmytheField();
    }

    round1Ids.forEach(id => {
      document.getElementById(id).addEventListener('change', createRound2Matchups);
    });

    [
      'R2_EST_1_team', 'R2_EST_2_team', 'R2_WEST_1_team', 'R2_WEST_2_team'
    ].forEach(id => {
      document.getElementById(id).addEventListener('change', createRound3Matchups);
    });

    [
      'R3_EST_1_team', 'R3_WEST_1_team'
    ].forEach(id => {
      document.getElementById(id).addEventListener('change', createRound4Matchup);
    });
    
function submitPredictions() {
  // Demander la confirmation avant de soumettre
  const confirmation = window.confirm("√ätes-vous s√ªr de soumettre vos pr√©dictions ?");

  if (confirmation) {
    const form = document.getElementById("predictionForm");
    const formData = new FormData(form);

    // Convertir en format x-www-form-urlencoded
    const data = new URLSearchParams();
    for (const pair of formData.entries()) {
      data.append(pair[0], pair[1]);
    }

    fetch("https://script.google.com/macros/s/AKfycbwZB6mXCs2mpdsNzpeBaACU1C66kEjWp_cBq17kgSDjQhsDHpgSyzrxE-6QQFDwuvOH/exec", {
      method: "POST",
      mode: "no-cors", 
      headers: {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      body: data
    })
    .then(() => {
      alert("Pr√©dictions envoy√©es!");
      form.reset(); // R√©initialiser le formulaire apr√®s l'envoi
    })
    .catch(error => {
      alert("Erreur lors de l‚Äôenvoi : " + error);
      console.error(error);
    });
  } else {
    console.log("Soumission annul√©e.");
  }
}
  function checkIfReadyToSubmit() {
  const requiredFields = [
    "Nom", "Prenom",
    "R1_EST_1_team", "R1_EST_1_games",
    "R1_EST_2_team", "R1_EST_2_games",
    "R1_EST_3_team", "R1_EST_3_games",
    "R1_EST_4_team", "R1_EST_4_games",
    "R1_WEST_1_team", "R1_WEST_1_games",
    "R1_WEST_2_team", "R1_WEST_2_games",
    "R1_WEST_3_team", "R1_WEST_3_games",
    "R1_WEST_4_team", "R1_WEST_4_games",
    "R2_EST_1_team", "R2_EST_1_games",
    "R2_EST_2_team", "R2_EST_2_games",
    "R2_WEST_1_team", "R2_WEST_1_games",
    "R2_WEST_2_team", "R2_WEST_2_games",
    "R3_EST_1_team", "R3_EST_1_games",
    "R3_WEST_1_team", "R3_WEST_1_games",
    "R4_final_team", "R4_final_games",
    "Conn_Smythe"
  ];

  const allFilled = requiredFields.every(id => {
    const el = document.getElementById(id);
    if (!el) return false;
    const value = el.value.trim();
    return value !== "";
  });

  const submitBtn = document.getElementById("submitBtn");
  if (submitBtn) {
    submitBtn.disabled = !allFilled;
  }
}
window.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("predictionForm");

  if (form) {
    form.querySelectorAll("input, select").forEach(el => {
      el.addEventListener("input", checkIfReadyToSubmit);
      el.addEventListener("change", checkIfReadyToSubmit);
    });

    checkIfReadyToSubmit(); // Appel initial
  }
});
</script>
</body>
</html>
